<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jp.arise.com.dao.COMGM003Dao">
    <resultMap id="resultCOMGM003Dto" type="jp.arise.com.dto.COMGM003Dto">
         <result column="syain_id" property="syainId"/>
        <result column="birth_dt" property="seinengappiFrom"/>
        <result column="birth_dt" property="seinengappiTo"/>
        <result column="zensyoku_na" property="previous"/>
        <result column="yakusyoku_cd" property="psition"/>
        <result column="nyusya_dt" property="nyusyabiFrom"/>
        <result column="nyusya_dt" property="nyusyabiTo"/>
        <result column="syozoku_team" property="teamNa"/>
        <result column="genba_na" property="genbaNa"/>
        <result column="tanka_vl" property="tanka"/>
        <result column="phase_cd" property="phase"/>

        <result column="moyori_eki_1" property="moyori1Station"/>
        <result column="moyori_eki_2" property="moyori2Station"/>
        <result column="moyori_eki_3" property="moyori3Station"/>
        <result column="address" property="address"/>

        <result column="genba_na" property="genbaNa"/>
        <result column="genba_moyori_eki_1" property="moyori1Station"/>
        <result column="genba_moyori_eki_2" property="moyori2Station"/>
        <result column="genba_moyori_eki_3" property="moyori3Station"/>
        <result column="genba_address" property="address"/>
    </resultMap>

    <select id="getSyainDt" resultMap="resultCOMGM003Dto">
        SELECT *
        FROM syain_dt
        <where>
			<if test="syainId != null">
				AND syain_id like #{syainId} || '%'
			</if>

			and birth_dt Between
			<choose>
				<when test="seinengappiFrom != ''">
					 to_date(#{seinengappiFrom},'YYYYMMDD')
				</when>
				<otherwise>
					to_date('00000000','YYYYMMDD')
				</otherwise>
			</choose>
            and
			<choose>
				<when test="seinengappiTo != ''">
					to_date(#{seinengappiTo},'YYYYMMDD')
				</when>
				<otherwise>
					to_date('99999999','YYYYMMDD')
				</otherwise>
			</choose>

			<if test="previous != null">
				AND zensyoku_na like #{previous} || '%'
			</if>

			<if test="psition != null">
				AND yakusyoku_cd like #{psition} || '%'
			</if>

			and nyusya_dt Between
			<choose>
				<when test="nyusyabiFrom != ''">
					to_date(#{nyusyabiFrom},'YYYYMMDD')
				</when>
				<otherwise>
					to_date('00000000','YYYYMMDD')
				</otherwise>
			</choose>
			and
			<choose>
				<when test="nyusyabiTo  != ''">
					to_date(#{nyusyabiTo},'YYYYMMDD')
				</when>
				<otherwise>
					to_date('99999999','YYYYMMDD')
				</otherwise>
			</choose>

			<if test="teamNa != null">
				AND syozoku_team like #{teamNa} || '%'
			</if>

			<if test="genbaNa != null">
				AND genba_na like #{genbaNa} || '%'
			</if>

			<if test="phase != null">
				AND phase_cd like #{phase} || '%'
			</if>



			<if test="moyori1Station != null">
				AND moyori_eki_1 like #{moyori1Station} || '%'
			</if>

			<if test="moyori2Station != null">
				AND moyori_eki_2 like #{moyori2Station} || '%'
			</if>

			<if test="moyori3Station != null">
				AND moyori_eki_3 like #{moyori3Station} || '%'
			</if>

			<if test="address != null">
				AND syain_address like #{address} || '%'
			</if>
        </where>

    </select>

    <select id="getGenbaDt" resultMap="resultCOMGM003Dto">
        SELECT *
        FROM genba_dt
        <where>

			<if test="genbaNa != null">
				AND genba_na like #{genbaNa} || '%'
			</if>

			<if test="phase != null">
				AND phase_cd like #{phase} || '%'
			</if>

			<if test="moyori1Station != null">
				AND genba_moyori_eki_1 like #{moyori1Station} || '%'
			</if>

			<if test="moyori2Station != null">
				AND genba_moyori_eki_2 like #{moyori2Station} || '%'
			</if>

			<if test="moyori3Station != null">
				AND genba_moyori_eki_3 like #{moyori3Station} || '%'
			</if>

			<if test="address != null">
				AND genba_address like #{address} || '%'
			</if>

        </where>

    </select>

</mapper>